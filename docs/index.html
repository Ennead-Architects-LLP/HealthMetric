<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthMetric Dashboard - Ennead Architects</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link rel="stylesheet" href="styles/responsive.css">
    <link rel="stylesheet" href="styles/components/hero.css">
</head>
<body>
    <!-- Hero Section -->
    <section class="hero" id="hero">
        <!-- Background Slideshow -->
        <div class="hero-slideshow">
            <div class="slide slide-1 active" style="background-image: url('https://design-middleeast.com/wp-content/uploads/2021/11/Shanghai-Astronomy-Museum-Ennead-Architects-1.jpg');"></div>
            <div class="slide slide-2" style="background-image: url('https://www.archdaily.com/wp-content/uploads/2022/06/1655122012-archdaily-milwaukee-public-museum-ennead-architects-kahler-slater-01.jpg');"></div>
            <div class="slide slide-3" style="background-image: url('https://natrealestatedevelopment.com/wp-content/uploads/2023/05/Jefferson-Health-Honickman-Center-Ennead-Architects-1.jpg');"></div>
        </div>
        
        <!-- Flying Items Container -->
        <div class="flying-container"></div>
        
        <!-- Hero Content -->
        <div class="hero-content">
            <h1 class="hero-title fade-in">HealthMetric Dashboard</h1>
            <p class="hero-subtitle fade-in stagger-1">Architectural Project Analytics & Performance Tracking</p>
            
            <!-- Metrics Grid -->
            <div class="metrics-grid fade-in stagger-2">
                <div class="metric-card">
                    <div class="metric-value" id="totalProjects">-</div>
                    <div class="metric-label">Total Projects</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalElements">-</div>
                    <div class="metric-label">Total Elements</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalViews">-</div>
                    <div class="metric-label">Total Views</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalWarnings">-</div>
                    <div class="metric-label">Total Warnings</div>
                </div>
            </div>
            
            <!-- Enter Dashboard Button -->
            <button class="enter-dashboard-btn fade-in stagger-3" id="enterDashboardBtn">
                Enter Dashboard
            </button>
        </div>
        
        <!-- Ennead Architects Branding -->
        <div class="ennead-branding">
            <div class="ennead-logo">Ennead Architects LLP</div>
            <div class="ennead-powered">Powered by EnneadTab</div>
        </div>
        
        <!-- Loading State -->
        <div class="hero-loading hidden" id="heroLoading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading Dashboard Data...</div>
        </div>
    </section>

    <!-- JavaScript -->
    <script>
        // Simple Hero Animations without ES6 modules
        class HeroAnimations {
            constructor() {
                this.flyingItems = [];
                this.mousePosition = { x: 0, y: 0 };
                this.isMouseMoving = false;
                this.mouseTimeout = null;
                this.maxItems = 30;
                this.animationId = null;
                this.isActive = false;
                
                this.projectNames = [
                    'Healthcare Starter Template',
                    '1643_LHH - Existing',
                    '1643_LHH - New',
                    '1643_LHH ULURP BASE Scheme D',
                    'Lines and Fills',
                    'TEMP - L1 - Ambulance Drive Thru',
                    'TEMP - Programming Plans'
                ];
                
                this.hubNames = ['Ennead Architects LLP'];
                this.init();
            }
            
            init() {
                this.createFlyingItems();
                this.bindEvents();
                this.startAnimation();
            }
            
            createFlyingItems() {
                const container = document.querySelector('.flying-container');
                if (!container) return;
                
                container.innerHTML = '';
                this.flyingItems = [];
                
                    for (let i = 0; i < this.maxItems; i++) {
                        const item = this.createFlyingItem();
                        container.appendChild(item);
                        
                        // Create more diverse initial velocities with wandering patterns
                        const angle = Math.random() * Math.PI * 2;
                        const speed = Math.random() * 2.0 + 0.5; // Higher initial speeds
                        const wanderPattern = Math.random(); // Different movement patterns
                        
                        this.flyingItems.push({
                            element: item,
                            x: Math.random() * window.innerWidth,
                            y: Math.random() * window.innerHeight,
                            vx: Math.cos(angle) * speed,
                            vy: Math.sin(angle) * speed,
                            targetX: 0,
                            targetY: 0,
                            state: 'random',
                            opacity: Math.random() * 0.5 + 0.3,
                            wanderPattern: wanderPattern, // Store pattern for unique behavior
                            lastDirectionChange: Date.now() // Track when direction last changed
                        });
                    }
            }
            
            createFlyingItem() {
                const item = document.createElement('div');
                item.className = 'flying-item';
                
                const isProject = Math.random() > 0.3;
                const names = isProject ? this.projectNames : this.hubNames;
                const name = names[Math.floor(Math.random() * names.length)];
                
                item.textContent = name;
                item.style.left = Math.random() * window.innerWidth + 'px';
                item.style.top = Math.random() * window.innerHeight + 'px';
                item.style.opacity = Math.random() * 0.5 + 0.3;
                
                return item;
            }
            
            bindEvents() {
                document.addEventListener('mousemove', (e) => {
                    this.mousePosition.x = e.clientX;
                    this.mousePosition.y = e.clientY;
                    this.isMouseMoving = true;
                    
                    if (this.mouseTimeout) {
                        clearTimeout(this.mouseTimeout);
                    }
                    
                    this.mouseTimeout = setTimeout(() => {
                        this.isMouseMoving = false;
                    }, 100);
                });
                
                window.addEventListener('resize', () => {
                    this.handleResize();
                });
            }
            
            startAnimation() {
                if (this.animationId) return;
                this.isActive = true;
                this.animate();
            }
            
            animate() {
                if (!this.isActive) return;
                
                this.flyingItems.forEach((item, index) => {
                    this.updateFlyingItem(item, index);
                });
                
                this.animationId = requestAnimationFrame(() => this.animate());
            }
            
            updateFlyingItem(item, index) {
                const element = item.element;
                
                if (this.isMouseMoving) {
                    this.attractToMouse(item);
                } else {
                    this.randomFloat(item);
                }
                
                    item.x += item.vx;
                    item.y += item.vy;

                    // Bounce off edges with some randomness
                    if (item.x < 0) {
                        item.x = 0;
                        item.vx = Math.abs(item.vx) * (0.8 + Math.random() * 0.4);
                    }
                    if (item.x > window.innerWidth) {
                        item.x = window.innerWidth;
                        item.vx = -Math.abs(item.vx) * (0.8 + Math.random() * 0.4);
                    }
                    if (item.y < 0) {
                        item.y = 0;
                        item.vy = Math.abs(item.vy) * (0.8 + Math.random() * 0.4);
                    }
                    if (item.y > window.innerHeight) {
                        item.y = window.innerHeight;
                        item.vy = -Math.abs(item.vy) * (0.8 + Math.random() * 0.4);
                    }
                
                element.style.left = item.x + 'px';
                element.style.top = item.y + 'px';
                element.style.opacity = item.opacity;
                element.className = `flying-item ${item.state}`;
            }
            
            attractToMouse(item) {
                const dx = this.mousePosition.x - item.x;
                const dy = this.mousePosition.y - item.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 200) {
                    const force = 0.02;
                    item.vx += dx * force;
                    item.vy += dy * force;
                    item.state = 'attracted';
                    item.opacity = Math.min(1, 0.5 + (200 - distance) / 200 * 0.5);
                } else {
                    const force = 0.01;
                    item.vx += dx * force;
                    item.vy += dy * force;
                    item.state = 'following';
                    item.opacity = 0.7;
                }
                
                item.vx *= 0.98;
                item.vy *= 0.98;
                
                const maxVelocity = 2;
                const velocity = Math.sqrt(item.vx * item.vx + item.vy * item.vy);
                if (velocity > maxVelocity) {
                    item.vx = (item.vx / velocity) * maxVelocity;
                    item.vy = (item.vy / velocity) * maxVelocity;
                }
            }
            
            randomFloat(item) {
                // Create more dynamic wandering behavior
                const time = Date.now() * 0.001;
                const itemId = this.flyingItems.indexOf(item);
                const timeSinceLastChange = Date.now() - (item.lastDirectionChange || 0);
                
                // Different wandering patterns based on item's wanderPattern
                const pattern = item.wanderPattern || 0;
                let wanderForce, driftForce, turbulenceForce, changeFrequency;
                
                if (pattern < 0.3) {
                    // Erratic wanderer - lots of direction changes
                    wanderForce = 0.04;
                    driftForce = 0.02;
                    turbulenceForce = 0.015;
                    changeFrequency = 0.1;
                } else if (pattern < 0.6) {
                    // Smooth wanderer - gentle curves
                    wanderForce = 0.02;
                    driftForce = 0.01;
                    turbulenceForce = 0.005;
                    changeFrequency = 0.05;
                } else if (pattern < 0.8) {
                    // Explorer - long straight paths with occasional turns
                    wanderForce = 0.03;
                    driftForce = 0.008;
                    turbulenceForce = 0.01;
                    changeFrequency = 0.02;
                } else {
                    // Drifter - very slow, gentle movement
                    wanderForce = 0.015;
                    driftForce = 0.005;
                    turbulenceForce = 0.003;
                    changeFrequency = 0.03;
                }
                
                // Primary wandering force (pattern-based frequency)
                if (Math.random() < changeFrequency) {
                    const angle = Math.random() * Math.PI * 2;
                    const force = wanderForce * (0.5 + Math.random() * 0.5);
                    item.vx += Math.cos(angle) * force;
                    item.vy += Math.sin(angle) * force;
                    item.lastDirectionChange = Date.now();
                }
                
                // Continuous drift (gentle, constant)
                item.vx += (Math.random() - 0.5) * driftForce;
                item.vy += (Math.random() - 0.5) * driftForce;
                
                // Turbulence (small, frequent changes)
                item.vx += (Math.random() - 0.5) * turbulenceForce;
                item.vy += (Math.random() - 0.5) * turbulenceForce;
                
                // Periodic major direction changes (based on pattern)
                if (Math.random() < changeFrequency * 0.5 && timeSinceLastChange > 2000) {
                    const newAngle = Math.random() * Math.PI * 2;
                    const currentSpeed = Math.sqrt(item.vx * item.vx + item.vy * item.vy) || 0.5;
                    const speedVariation = 0.5 + Math.random() * 1.0;
                    item.vx = Math.cos(newAngle) * currentSpeed * speedVariation;
                    item.vy = Math.sin(newAngle) * currentSpeed * speedVariation;
                    item.lastDirectionChange = Date.now();
                }
                
                // Occasional speed bursts (pattern-dependent)
                if (Math.random() < (pattern < 0.3 ? 0.08 : 0.03)) {
                    const burstAngle = Math.random() * Math.PI * 2;
                    const burstSpeed = (pattern < 0.3 ? 2.0 : 1.0) + Math.random() * 1.0;
                    item.vx += Math.cos(burstAngle) * burstSpeed;
                    item.vy += Math.sin(burstAngle) * burstSpeed;
                }
                
                // Pattern-based friction
                const friction = pattern < 0.3 ? 0.99 : 0.995;
                item.vx *= friction;
                item.vy *= friction;

                // Variable speed limits based on pattern
                const baseMaxVelocity = pattern < 0.3 ? 2.5 : 1.8;
                const maxVelocity = baseMaxVelocity + Math.sin(time + itemId) * 0.5;
                const velocity = Math.sqrt(item.vx * item.vx + item.vy * item.vy);
                if (velocity > maxVelocity) {
                    item.vx = (item.vx / velocity) * maxVelocity;
                    item.vy = (item.vy / velocity) * maxVelocity;
                }
                
                // Minimum velocity to prevent getting stuck
                const minVelocity = pattern < 0.8 ? 0.4 : 0.2;
                if (velocity < minVelocity) {
                    const angle = Math.random() * Math.PI * 2;
                    item.vx = Math.cos(angle) * minVelocity;
                    item.vy = Math.sin(angle) * minVelocity;
                }
                
                item.state = 'random';
                item.opacity = 0.2 + Math.sin(time * 2 + itemId) * 0.4;
            }
            
            handleResize() {
                this.flyingItems.forEach(item => {
                    if (item.x > window.innerWidth) item.x = window.innerWidth - 100;
                    if (item.y > window.innerHeight) item.y = window.innerHeight - 100;
                });
            }
        }
        
        // Initialize Hero Page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize hero animations
            const heroAnimations = new HeroAnimations();
            
            // Initialize slideshow with Ennead Architects projects
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            const slideInterval = setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 6000); // 6 seconds per slide to showcase each project
            
            // Load and display metrics
            loadMetrics();
            
            // Handle dashboard button click
            document.getElementById('enterDashboardBtn').addEventListener('click', function() {
                document.getElementById('heroLoading').classList.remove('hidden');
                document.body.classList.add('screen-wipe');
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 1500);
            });
            
            // Load metrics from data files
            function loadMetrics() {
                try {
                    const mockData = {
                        totalProjects: 7,
                        totalElements: 16275,
                        totalViews: 277,
                        totalWarnings: 0
                    };
                    
                    animateNumber('totalProjects', mockData.totalProjects);
                    animateNumber('totalElements', mockData.totalElements);
                    animateNumber('totalViews', mockData.totalViews);
                    animateNumber('totalWarnings', mockData.totalWarnings);
                    
                } catch (error) {
                    console.error('Error loading metrics:', error);
                    document.getElementById('totalProjects').textContent = 'Error';
                    document.getElementById('totalElements').textContent = 'Error';
                    document.getElementById('totalViews').textContent = 'Error';
                    document.getElementById('totalWarnings').textContent = 'Error';
                }
            }
            
            // Animate number counting
            function animateNumber(elementId, targetValue) {
                const element = document.getElementById(elementId);
                if (!element) return;
                
                const duration = 2000;
                const startTime = performance.now();
                
                function updateNumber(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                    const currentValue = Math.floor(easeOutQuart * targetValue);
                    
                    element.textContent = currentValue.toLocaleString();
                    
                    if (progress < 1) {
                        requestAnimationFrame(updateNumber);
                    } else {
                        element.textContent = targetValue.toLocaleString();
                    }
                }
                
                requestAnimationFrame(updateNumber);
            }
        });
    </script>
</body>
</html>