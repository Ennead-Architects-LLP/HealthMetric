<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthMetric Dashboard - Ennead Architects</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../styles/base.css">
    <link rel="stylesheet" href="../styles/layout.css">
    <link rel="stylesheet" href="../styles/animations.css">
    <link rel="stylesheet" href="../styles/components/hero.css">
</head>
<body>
    <!-- Hero Section -->
    <section class="hero" id="hero">
        <!-- Background Slideshow -->
        <div class="hero-slideshow">
            <div class="slide slide-1 active"></div>
            <div class="slide slide-2"></div>
            <div class="slide slide-3"></div>
            <div class="slide slide-4"></div>
            <div class="slide slide-5"></div>
        </div>
        
        <!-- Flying Items Container -->
        <div class="flying-container"></div>
        
        <!-- Hero Content -->
        <div class="hero-content">
            <h1 class="hero-title fade-in">HealthMetric Dashboard</h1>
            <p class="hero-subtitle fade-in stagger-1">Architectural Project Analytics & Performance Tracking</p>
            
            <!-- Metrics Grid -->
            <div class="metrics-grid fade-in stagger-2">
                <div class="metric-card">
                    <div class="metric-value" id="totalProjects">-</div>
                    <div class="metric-label">Total Projects</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalElements">-</div>
                    <div class="metric-label">Total Elements</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalViews">-</div>
                    <div class="metric-label">Total Views</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalWarnings">-</div>
                    <div class="metric-label">Total Warnings</div>
                </div>
            </div>
            
            <!-- Enter Dashboard Button -->
            <button class="enter-dashboard-btn fade-in stagger-3" id="enterDashboardBtn">
                Enter Dashboard
            </button>
        </div>
        
        <!-- Ennead Architects Branding -->
        <div class="ennead-branding">
            <div class="ennead-logo">Ennead Architects LLP</div>
            <div class="ennead-powered">Powered by EnneadTab</div>
        </div>
        
        <!-- Loading State -->
        <div class="hero-loading hidden" id="heroLoading">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading Dashboard Data...</div>
        </div>
    </section>
    
    <!-- JavaScript -->
    <script src="../js/data/parser.js"></script>
    <script src="../js/components/HeroAnimations.js"></script>
    <script src="../js/core/app.js"></script>
    
    <script>
        // Initialize Hero Page
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize hero animations
            const heroAnimations = new HeroAnimations();
            
            // Initialize slideshow
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            const slideInterval = setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 5000);
            
            // Load and display metrics
            loadMetrics();
            
            // Handle dashboard button click
            document.getElementById('enterDashboardBtn').addEventListener('click', function() {
                // Show loading state
                document.getElementById('heroLoading').classList.remove('hidden');
                
                // Add screen wipe transition
                document.body.classList.add('screen-wipe');
                
                // Navigate to dashboard after animation
                setTimeout(() => {
                    window.location.href = '../dashboard.html';
                }, 1500);
            });
            
            // Load metrics from data files
            async function loadMetrics() {
                try {
                    // For now, we'll use mock data since we need to load actual JSON files
                    // In production, this would fetch from the data directory
                    const mockData = {
                        totalProjects: 7,
                        totalElements: 16275,
                        totalViews: 277,
                        totalWarnings: 0
                    };
                    
                    // Animate the numbers
                    animateNumber('totalProjects', mockData.totalProjects);
                    animateNumber('totalElements', mockData.totalElements);
                    animateNumber('totalViews', mockData.totalViews);
                    animateNumber('totalWarnings', mockData.totalWarnings);
                    
                } catch (error) {
                    console.error('Error loading metrics:', error);
                    // Show error state
                    document.getElementById('totalProjects').textContent = 'Error';
                    document.getElementById('totalElements').textContent = 'Error';
                    document.getElementById('totalViews').textContent = 'Error';
                    document.getElementById('totalWarnings').textContent = 'Error';
                }
            }
            
            // Animate number counting
            function animateNumber(elementId, targetValue) {
                const element = document.getElementById(elementId);
                const duration = 2000;
                const startTime = performance.now();
                
                function updateNumber(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    // Easing function
                    const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                    const currentValue = Math.floor(easeOutQuart * targetValue);
                    
                    element.textContent = currentValue.toLocaleString();
                    
                    if (progress < 1) {
                        requestAnimationFrame(updateNumber);
                    } else {
                        element.textContent = targetValue.toLocaleString();
                    }
                }
                
                requestAnimationFrame(updateNumber);
            }
        });
    </script>
</body>
</html>
